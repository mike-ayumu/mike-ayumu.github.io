<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>計測タグ利用(自動付与)（グループなし）</title>
    </head>
    <body>
        <h1 id="click">ランディングページ</h2>
        <h3>計測タグ利用(自動付与)（グループなし）</h3>
        <a href="https://act.dev-cats.ademo.jp/mcl/9baz9728959157I1/?mbid=5c1v11e0510D4Dad">中間クリックへ</a>
        <a href="https://act.dev-cats.ademo.jp/mcl/9baz9728959157I1/?mbid=5c1v11e0510D4Dad&param1=自動付与（グループなし）">中間クリックへ（パラ）</a>
        
        <hr>
        
        <a href="https://example.com">aタグ - パラメーターなし</a>
        <a href="https://example.com" data-add-c2d53562e22d12b0="AFAD">aタグ - パラメーターあり（uqIdが異なる）</a>
        <a href="https://example.com" data-add-9baz9728959157I1="AFAD">aタグ - パラメーターあり</a>
        
        <form action="https://example.com" method="post">
            <input type="submit" value="パラメーターなし">
        </form>
        <form action="https://example.com" method="post" data-add-c2d53562e22d12b0="AFAD">
            <input type="submit" value="パラメーターあり（uqIdが異なる）">
        </form>
        <form action="https://example.com" method="post" data-add-9baz9728959157I1="AFAD">
            <input type="submit" value="パラメーターあり">
        </form>
        
        <hr>
        
        <script id="ck_9baz9728959157I1" src="https://act.dev-cats.ademo.jp/ck/9baz9728959157I1/cookie.js"></script>
        <script>CATS_Create(114, "9baz9728959157I1");</script>
        
        
        
        <h3>ローカルストレージ確認</h3>
        <table>
          <tr>
            <th>キー</th>
            <th>値</th>
          </tr>
          <tbody id="tb">
          </tbody>
        </table>
        
        <button type="button" class="btn btn-outline-danger" onclick="cookieDel();">クッキー削除</button>
        <button type="button" class="btn btn-outline-danger" onclick="localStorageDel();">ローカルストレージ削除</button>
        
        <script>
            function cookieDel() {
                C=document.cookie.split(';%20');for(d='.'+location.host;d;d=(''+d).substr(1).match(/\..*$/))for(sl=0;sl<2;++sl)for(p='/'+location.pathname;p;p=p.substring(0,p.lastIndexOf('/')))for(i%20in%20C)if(c=C[i]){document.cookie=c+';%20domain='+d.slice(sl)+';%20path='+p.slice(1)+'/'+';%20expires='+new%20Date((new%20Date).getTime()-1e11).toGMTString()}
                alert('クッキーを削除しました。');
            }
            function localStorageDel() {
                window.localStorage&&window.localStorage.clear()
                alert('ローカルストレージを削除しました。');
            }
            document.getElementById('click').onclick = function() {
                // ローカルストレージのデータを表に出力
                var viewStorage = function(){
                    var tb = document.getElementById("tb")
                    // テーブルの初期化
                    while (tb.firstChild){
                      tb.removeChild(tb.firstChild);
                    }

                    // テーブルの出力
                    for (var i=0; i < localStorage.length; i++) {
                        var _key = localStorage.key(i);
                        var tr = document.createElement("tr");
                        var td1 = document.createElement("td");
                        var td2 = document.createElement("td");
                        tb.appendChild(tr);
                        tr.appendChild(td1);
                        tr.appendChild(td2);
                        td1.innerHTML = _key;
                        td2.innerHTML = localStorage.getItem(_key);
                    }
                };
                viewStorage();
                
                
                
                let fromActionList = "";
                let formTag = document.getElementsByTagName('form');
                for (var i = 0; i < formTag.length; i++) {
                    fromActionList += formTag[i].action + "\n";
                }


                alert("クッキー\n" + document.cookie);
                alert("フォームアクションURL\n" + fromActionList);
            };
        </script>
    </body>
</html>
